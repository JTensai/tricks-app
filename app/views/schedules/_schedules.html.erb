<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>

<table class="schedules">
  <tr>
    <th>Level</th>
    <th><%= sortable "day" %></th>
    <th><%= sortable "actual_time", "Time" %></th>
    <th><%= sortable "teacher" %></th>
    <th><%= sortable "location" %></th>
    <th>Price</th>
    <th>Length</th>
    <th>Age</th>
    <th>Gender</th>
    <th></th>
    <th></th>
  </tr>

<% days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %>

<% if can? :manage, Schedule %>
    <% @schedules.each do |schedule| %>
      <tr>
        <td><%= schedule.level.levelname %></td>
        <td><%= days[schedule.day.to_i] %></td>
        <!-- <td><%# if schedule.time != nil %><%#= schedule.time.strftime("%l:%M %p") %><%# end %></td> -->
        <td><% if schedule.time != nil %><%= schedule.time %><% end %></td>
        <td><%= schedule.teacher %></td>
        <td><%= schedule.location %></td>
        <td><%= schedule.level.price %>$</td>
        <td><%= schedule.level.length %> min</td>
        <td><%= schedule.level.age %></td>
        <td><%= schedule.level.gender %></td>
        <td style="padding: 0px 3px 0px 3px; border: 0"><%= link_to 'Edit', edit_schedule_path(schedule) %></td>
        <td style="padding: 0px 3px 0px 3px; border: 0"><%= link_to 'Destroy', schedule, confirm: 'Are you sure?', method: :delete %></td>
      </tr>
    <% end %>
<% else %>
    <% @schedules.each do |schedule| %>
    
      <tr>
        <td><%= schedule.level.levelname %></td>
        <td><%= days[schedule.day.to_i] %></td>
        <td><%= schedule.time %></td>
        <td><%= schedule.teacher %></td>
        <td><%= schedule.location %></td>
        <td><%= schedule.level.price %>$</td>
        <td><%= schedule.level.length %> min</td>
        <td><%= schedule.level.age %></td>
        <td><%= schedule.gender %></td>
      </tr>
    <% end %>
<% end %>
</table>


<br />

<div style="text-align:center">
    <!-- Add Pagination -->
  <%#= will_paginate @schedules%>
</div>